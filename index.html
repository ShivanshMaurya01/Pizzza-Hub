<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UrbanSlice ULTRA Platinum</title>
<link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">

<style>
:root{
--primary:#00ffcc;
--bg:#0a0a0a;
--card:#151515;
--text:#ffffff;
--danger:#ff3e3e;
--warning:#ffcc00;
}

*{margin:0;padding:0;box-sizing:border-box;font-family:Inter,system-ui}
body{background:var(--bg);color:var(--text);overflow-x:hidden}

/* NAV */
nav{
position:fixed;top:0;width:100%;z-index:1000;
background:rgba(0,0,0,.9);
padding:1rem 6%;
display:flex;justify-content:space-between;align-items:center;
border-bottom:1px solid #222;
}

.logo{
font-size:1.6rem;font-weight:900;color:var(--primary);
cursor:pointer;
}

.nav-icons i{
font-size:1.4rem;margin-left:18px;cursor:pointer;
}

/* LAYOUT */
section{padding:120px 6% 40px}
.grid{
display:grid;
grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
gap:25px;
}

.card{
background:var(--card);
border-radius:16px;
overflow:hidden;
border:1px solid #222;
transition:.3s;
position:relative;
}

.card:hover{
transform:translateY(-6px);
border-color:var(--primary);
}

.card img{
width:100%;
height:190px;
object-fit:cover;
}

.card-body{padding:18px}

.heart{
position:absolute;
top:15px;
right:15px;
font-size:1.4rem;
cursor:pointer;
color:#555;
}

.heart.active{color:var(--danger)}

.btn{
background:var(--primary);
color:#000;
border:none;
padding:10px 16px;
border-radius:8px;
font-weight:700;
cursor:pointer;
margin-top:10px;
width:100%;
}

.btn-danger{
background:var(--danger);
color:#fff;
}

.btn-ghost{
background:transparent;
border:1px solid var(--primary);
color:var(--primary);
}

/* PANELS */
.panel{
position:fixed;
top:0;
right:-100%;
width:420px;
height:100%;
background:#0c0c0c;
z-index:2000;
padding:30px;
transition:.5s;
overflow-y:auto;
border-left:1px solid var(--primary);
}

.panel.active{right:0}

.close{
position:absolute;
top:20px;
right:20px;
font-size:1.5rem;
cursor:pointer;
}

/* CART ITEMS */
.cart-item{
display:flex;
justify-content:space-between;
align-items:center;
margin-bottom:10px;
background:#1a1a1a;
padding:10px;
border-radius:8px;
}

.qty-controls button{
background:#222;
border:none;
color:#fff;
padding:4px 8px;
margin:0 4px;
cursor:pointer;
}

/* STATUS */
.status{
padding:4px 8px;
border-radius:6px;
font-size:12px;
}

.preparing{background:#333}
.baking{background:#555}
.delivery{background:#0066ff}
.delivered{background:#00aa44}
.cancelled{background:var(--danger)}

/* ADMIN MODAL */
#adminLogin{
position:fixed;
inset:0;
background:rgba(0,0,0,.95);
display:none;
align-items:center;
justify-content:center;
z-index:4000;
flex-direction:column;
}

#adminLogin input{
padding:10px;
width:250px;
margin-bottom:10px;
border-radius:6px;
border:1px solid #333;
background:#111;
color:#fff;
}

/* DASHBOARD */
#adminPanel{
position:fixed;
inset:0;
background:#0d0d0d;
z-index:5000;
display:none;
overflow:auto;
padding:40px;
}

.admin-section{
margin-bottom:40px;
background:#111;
padding:20px;
border-radius:12px;
}

/* TOAST */
#toast{
position:fixed;
bottom:30px;
right:30px;
background:var(--primary);
color:#000;
padding:12px 22px;
border-radius:8px;
transform:translateY(150%);
transition:.4s;
z-index:9999;
}

#toast.show{transform:translateY(0)}
</style>
</head>
<body>

<nav>
<div class="logo" onclick="logoClick()">URBANSLICE</div>
<div class="nav-icons">
<i class="ri-heart-line" onclick="openPanel('wishPanel')"></i>
<i class="ri-history-line" onclick="openPanel('historyPanel')"></i>
<i class="ri-shopping-bag-fill" onclick="openPanel('cartPanel')"></i>
</div>
</nav>

<section>
<div class="grid" id="menuGrid"></div>
</section>

<!-- CART PANEL -->
<div class="panel" id="cartPanel">
<span class="close" onclick="closePanels()">&times;</span>
<h2>Your Bag</h2>
<div id="cartItems"></div>
<h3 style="margin-top:20px">Total: ₹<span id="totalVal">0</span></h3>
<button class="btn" onclick="placeOrder()">PLACE ORDER</button>
</div>

<!-- HISTORY -->
<div class="panel" id="historyPanel">
<span class="close" onclick="closePanels()">&times;</span>
<h2>Orders</h2>
<div id="orderLogs"></div>
</div>

<!-- WISHLIST -->
<div class="panel" id="wishPanel">
<span class="close" onclick="closePanels()">&times;</span>
<h2>Favorites</h2>
<div id="wishList"></div>
</div>

<!-- ADMIN LOGIN -->
<div id="adminLogin">
<h2>Admin Access</h2>
<input type="password" id="adminPass" placeholder="Enter password">
<button class="btn" style="width:250px" onclick="checkAdmin()">LOGIN</button>
</div>

<!-- ADMIN DASHBOARD -->
<div id="adminPanel">
<button class="btn-danger" onclick="closeAdmin()">EXIT ADMIN</button>

<div class="admin-section">
<h3>Analytics</h3>
<p>Total Revenue: ₹<span id="adminRevenue">0</span></p>
<p>Total Orders: <span id="adminOrders">0</span></p>
<p>Average Rating: <span id="adminRating">0</span></p>
<canvas id="revenueChart" height="100"></canvas>
</div>

<div class="admin-section">
<h3>Product Manager</h3>
<input id="newName" placeholder="Product Name">
<input id="newPrice" type="number" placeholder="Price">
<input id="newImage" placeholder="Image URL">
<button class="btn" onclick="addProduct()">ADD PRODUCT</button>
<div id="productAdminList"></div>
</div>

<div class="admin-section">
<h3>Orders Manager</h3>
<div id="adminOrderList"></div>
</div>
</div>

<div id="toast"></div><script>
/* ===============================
   DATA STORAGE SYSTEM
================================ */

let products = JSON.parse(localStorage.getItem("products")) || [
{ id:1, name:"Neapolitan Pizza", price:499, img:"https://images.unsplash.com/photo-1574071318508-1cdbad80ad50?w=500", active:true },
{ id:2, name:"Cheese Burst", price:599, img:"https://images.unsplash.com/photo-1513104890138-7c749659a591?w=500", active:true },
{ id:3, name:"Texas BBQ Burger", price:250, img:"https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=500", active:true }
];

let cart = JSON.parse(localStorage.getItem("cart")) || [];
let wishlist = JSON.parse(localStorage.getItem("wishlist")) || [];
let orders = JSON.parse(localStorage.getItem("orders")) || [];

function saveAll(){
localStorage.setItem("products", JSON.stringify(products));
localStorage.setItem("cart", JSON.stringify(cart));
localStorage.setItem("wishlist", JSON.stringify(wishlist));
localStorage.setItem("orders", JSON.stringify(orders));
}

/* ===============================
   MENU RENDER
================================ */

function renderMenu(){
menuGrid.innerHTML = products.filter(p=>p.active).map(p=>`
<div class="card">
<i class="ri-heart-fill heart ${wishlist.includes(p.id)?"active":""}" onclick="toggleWish(${p.id})"></i>
<img src="${p.img}">
<div class="card-body">
<h3>${p.name}</h3>
<p style="color:var(--primary);font-weight:bold">₹${p.price}</p>
<button class="btn" onclick="addToCart(${p.id})">ADD TO BAG</button>
</div>
</div>
`).join("");
}

/* ===============================
   CART SYSTEM
================================ */

function addToCart(id){
let item = cart.find(i=>i.id===id);
item ? item.qty++ : cart.push({id, qty:1});
saveAll(); updateCart();
toast("Added to bag");
}

function updateCart(){
let total=0;

cartItems.innerHTML = cart.map(c=>{
let p = products.find(x=>x.id===c.id);
total += p.price * c.qty;

return `
<div class="cart-item">
<span>${p.name}</span>
<div class="qty-controls">
<button onclick="changeQty(${c.id},-1)">-</button>
${c.qty}
<button onclick="changeQty(${c.id},1)">+</button>
<button onclick="removeItem(${c.id})">x</button>
</div>
</div>`;
}).join("");

totalVal.innerText = total;
saveAll();
}

function changeQty(id,val){
let item = cart.find(i=>i.id===id);
if(!item) return;
item.qty += val;
if(item.qty<=0) cart = cart.filter(i=>i.id!==id);
updateCart();
}

function removeItem(id){
cart = cart.filter(i=>i.id!==id);
updateCart();
}

/* ===============================
   ORDER SYSTEM
================================ */

function generateOrderId(){
return "ORD-"+Math.random().toString(36).substr(2,5).toUpperCase();
}

function placeOrder(){
if(cart.length===0){ toast("Cart empty"); return; }

let order={
id:generateOrderId(),
date:new Date().toLocaleString(),
items:[...cart],
total:parseInt(totalVal.innerText),
status:"Preparing",
rating:0
};

orders.push(order);
cart=[];
saveAll();
updateCart();
renderOrders();
startTracking(order.id);
toast("Order placed!");
}

function startTracking(id){
let stages=["Preparing","Baking","Out for Delivery","Delivered"];
let interval=setInterval(()=>{
let order=orders.find(o=>o.id===id);
if(!order || order.status==="Delivered" || order.status==="Cancelled"){
clearInterval(interval);
return;
}
let currentIndex=stages.indexOf(order.status);
if(currentIndex<stages.length-1){
order.status=stages[currentIndex+1];
saveAll();
renderOrders();
}
},4000);
}

function renderOrders(){
orderLogs.innerHTML = orders.slice().reverse().map(o=>{
return `
<div style="background:#1a1a1a;padding:12px;margin-bottom:10px;border-radius:8px">
<b>${o.id}</b><br>
<small>${o.date}</small><br>
<span class="status ${o.status.toLowerCase().replace(/ /g,'')}">${o.status}</span>
<br>Total: ₹${o.total}
</div>`;
}).join("");

updateAdmin();
}

/* ===============================
   WISHLIST
================================ */

function toggleWish(id){
wishlist.includes(id) ? wishlist=wishlist.filter(x=>x!==id) : wishlist.push(id);
saveAll();
renderMenu();
renderWish();
}

function renderWish(){
wishList.innerHTML = wishlist.map(id=>{
let p=products.find(x=>x.id===id);
return `<div style="padding:6px 0">${p.name}</div>`;
}).join("");
}

/* ===============================
   ADMIN ACCESS (Hidden)
================================ */

let logoClicks=0;

function logoClick(){
logoClicks++;
setTimeout(()=>logoClicks=0,2000);
if(logoClicks>=5){
adminLogin.style.display="flex";
logoClicks=0;
}
}

function checkAdmin(){
if(adminPass.value==="shivansh@123"){
adminLogin.style.display="none";
adminPanel.style.display="block";
updateAdmin();
}else{
toast("Wrong password");
}
}

function closeAdmin(){
adminPanel.style.display="none";
}

/* ===============================
   ADMIN FEATURES
================================ */

function updateAdmin(){
adminRevenue.innerText = orders.reduce((a,b)=>a+b.total,0);
adminOrders.innerText = orders.length;
let rated = orders.filter(o=>o.rating>0);
adminRating.innerText = rated.length ? (rated.reduce((a,b)=>a+b.rating,0)/rated.length).toFixed(1) : 0;

renderProductAdmin();
renderAdminOrders();
drawChart();
}

function renderProductAdmin(){
productAdminList.innerHTML = products.map(p=>`
<div style="margin-top:10px;background:#1a1a1a;padding:8px;border-radius:6px">
${p.name} - ₹${p.price}
<button onclick="editPrice(${p.id},10)">+10</button>
<button onclick="editPrice(${p.id},-10)">-10</button>
<button onclick="deleteProduct(${p.id})">Delete</button>
</div>
`).join("");
}

function editPrice(id,val){
let p=products.find(x=>x.id===id);
p.price+=val;
if(p.price<0) p.price=0;
saveAll();
renderMenu();
updateAdmin();
}

function deleteProduct(id){
products=products.filter(p=>p.id!==id);
saveAll();
renderMenu();
updateAdmin();
}

function addProduct(){
let name=newName.value;
let price=parseInt(newPrice.value);
let img=newImage.value;
if(!name||!price||!img){toast("Fill all fields");return;}
products.push({id:Date.now(),name,price,img,active:true});
saveAll();
renderMenu();
updateAdmin();
newName.value="";newPrice.value="";newImage.value="";
}

function renderAdminOrders(){
adminOrderList.innerHTML = orders.map(o=>`
<div style="margin-top:10px;background:#1a1a1a;padding:8px;border-radius:6px">
${o.id} - ${o.status}
<button onclick="changeStatus('${o.id}','Cancelled')">Cancel</button>
<button onclick="changeStatus('${o.id}','Delivered')">Deliver</button>
</div>
`).join("");
}

function changeStatus(id,status){
let o=orders.find(x=>x.id===id);
if(o){o.status=status; saveAll(); renderOrders();}
}

/* ===============================
   SIMPLE REVENUE CHART
================================ */

function drawChart(){
let canvas=document.getElementById("revenueChart");
let ctx=canvas.getContext("2d");
ctx.clearRect(0,0,canvas.width,canvas.height);

let data=orders.slice(-7).map(o=>o.total);
let max=Math.max(...data,100);

data.forEach((val,i)=>{
let height=(val/max)*80;
ctx.fillStyle="#00ffcc";
ctx.fillRect(i*40+20,100-height,30,height);
});
}

/* ===============================
   TOAST
================================ */

function toast(msg){
toast.innerText=msg;
toast.classList.add("show");
setTimeout(()=>toast.classList.remove("show"),2000);
}

/* INIT */
renderMenu();
updateCart();
renderOrders();
renderWish();
</script>
</body>
</html>
