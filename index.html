<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UrbanSlice ULTRA GOD V2</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Segoe UI,Arial}
body{
background:linear-gradient(-45deg,#0f0f0f,#1a1a1a,#111,#1c1c1c);
background-size:400% 400%;
animation:gradient 15s ease infinite;
color:#fff;overflow-x:hidden
}
@keyframes gradient{
0%{background-position:0% 50%}
50%{background-position:100% 50%}
100%{background-position:0% 50%}
}
.hidden{display:none}
nav{
position:fixed;top:0;width:100%;
backdrop-filter:blur(12px);
background:rgba(0,0,0,.6);
padding:15px 6%;
display:flex;justify-content:space-between;
align-items:center;z-index:1000;border-bottom:1px solid #222
}
nav h1{color:#ffcc00}
nav div{cursor:pointer}
section{padding:100px 6% 40px}
.glass{
background:rgba(255,255,255,.05);
backdrop-filter:blur(12px);
border:1px solid rgba(255,255,255,.08);
border-radius:14px;padding:15px
}
.menu-grid{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(230px,1fr));
gap:20px
}
.card img{width:100%;height:160px;object-fit:cover;border-radius:10px}
.price{color:#ffcc00;font-weight:bold;margin:5px 0}
button{
background:#ffcc00;color:#000;
padding:6px 12px;border:none;border-radius:6px;
cursor:pointer;font-weight:600
}
button:hover{opacity:.8}
.cart-panel,.page{
position:fixed;top:0;right:-100%;
width:100%;height:100%;
background:#0f0f0f;
transition:.5s;overflow-y:auto;padding:100px 6%
}
.active{right:0}
input,select{
padding:8px;background:#1a1a1a;border:1px solid #333;
color:#fff;border-radius:6px
}
.badge{
background:#ffcc00;color:#000;
padding:2px 8px;border-radius:10px;font-size:12px
}
.toast{
position:fixed;bottom:20px;right:20px;
padding:12px 18px;border-radius:6px;
color:#000;font-weight:600;opacity:0;transition:.4s
}
.toast.show{opacity:1}
.success{background:#4caf50}
.error{background:#ff4444}
.info{background:#ffcc00}
canvas{background:#111;border:1px solid #222;margin-top:20px}
</style>
</head>

<body>

<nav>
<h1>UrbanSlice ULTRA</h1>
<div onclick="openPage('cartPage')">Cart <span class="badge" id="cartCount">0</span></div>
</nav>

<section>
<div style="margin-bottom:20px">
<input type="text" id="search" placeholder="Search..." oninput="renderMenu()">
<select id="category" onchange="renderMenu()">
<option value="">All</option>
<option value="Pizza">Pizza</option>
<option value="Burger">Burger</option>
<option value="Drink">Drink</option>
</select>
<select id="sort" onchange="renderMenu()">
<option value="">Sort</option>
<option value="low">Price Low</option>
<option value="high">Price High</option>
</select>
</div>

<div class="menu-grid" id="menu"></div>
</section>

<!-- CART PAGE -->
<div id="cartPage" class="page">
<h2>Cart</h2>
<div id="cartItems"></div>
<p>Total: ₹<span id="total">0</span></p>
<input id="coupon" placeholder="Coupon Code">
<button onclick="applyCoupon()">Apply</button>
<p>Discount: ₹<span id="discount">0</span></p>
<button onclick="checkout()">Checkout</button>
<button onclick="closePage()">Close</button>
</div>

<!-- HISTORY PAGE -->
<div id="historyPage" class="page">
<h2>Orders</h2>
<div id="orders"></div>
<button onclick="closePage()">Close</button>
</div>

<!-- ADMIN -->
<div id="adminPage" class="page">
<h2>Analytics</h2>
<p>Total Orders: <span id="aOrders"></span></p>
<p>Total Revenue: ₹<span id="aRevenue"></span></p>
<p>Top Item: <span id="topItem"></span></p>
<canvas id="chart" width="300" height="200"></canvas>
<button onclick="resetAll()">Reset</button>
<button onclick="closePage()">Close</button>
</div>

<div class="toast" id="toast"></div>

<script>
const images=[
"https://images.unsplash.com/photo-1513104890138-7c749659a591?w=500",
"https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=500",
"https://images.unsplash.com/photo-1548365328-8c6db3220e4c?w=500",
"https://images.unsplash.com/photo-1550547660-d9450f859349?w=500",
"https://images.unsplash.com/photo-1550317138-10000687a72b?w=500"
];

const menuData=[
...Array.from({length:20},(_,i)=>({id:i+1,name:"Pizza "+(i+1),price:300+10*i,cat:"Pizza",img:images[i%3]})),
...Array.from({length:10},(_,i)=>({id:100+i,name:"Burger "+(i+1),price:150+10*i,cat:"Burger",img:images[3]})),
...Array.from({length:10},(_,i)=>({id:200+i,name:"Drink "+(i+1),price:80+5*i,cat:"Drink",img:images[4]}))
];

let cart=JSON.parse(localStorage.cart||"[]");
let orders=JSON.parse(localStorage.orders||"[]");
let discount=0;

function save(){localStorage.cart=JSON.stringify(cart);localStorage.orders=JSON.stringify(orders)}

function renderMenu(){
let s=document.getElementById("search").value.toLowerCase();
let c=document.getElementById("category").value;
let sort=document.getElementById("sort").value;
let items=menuData.filter(m=>
m.name.toLowerCase().includes(s)&&(!c||m.cat===c));
if(sort==="low")items.sort((a,b)=>a.price-b.price);
if(sort==="high")items.sort((a,b)=>b.price-a.price);

document.getElementById("menu").innerHTML=items.map(m=>`
<div class="glass card">
<img src="${m.img}">
<h3>${m.name}</h3>
<div>${m.cat}</div>
<div class="price">₹${m.price}</div>
<button onclick="addToCart(${m.id})">Add</button>
</div>
`).join("");
}

function addToCart(id){
let item=cart.find(i=>i.id===id);
if(item)item.qty++;
else cart.push({id,qty:1});
save();updateCart();
toast("Added","success")
}

function updateCart(){
let total=0;
document.getElementById("cartItems").innerHTML=cart.map(c=>{
let m=menuData.find(x=>x.id===c.id);
total+=m.price*c.qty;
return `<div>${m.name} x${c.qty}
<button onclick="change(${c.id},-1)">-</button>
<button onclick="change(${c.id},1)">+</button>
</div>`
}).join("");
document.getElementById("total").innerText=total-discount;
document.getElementById("cartCount").innerText=cart.length;
}

function change(id,d){
let item=cart.find(i=>i.id===id);
if(!item)return;
item.qty+=d;
if(item.qty<=0)cart=cart.filter(i=>i.id!==id);
save();updateCart();
}

function applyCoupon(){
let code=document.getElementById("coupon").value;
let total=cart.reduce((s,c)=>{
let m=menuData.find(x=>x.id===c.id);
return s+m.price*c.qty},0);
if(code==="RIX50"){discount=50}
else if(code==="GOD10"){discount=Math.floor(total*.1)}
else{discount=0;toast("Invalid","error");return}
document.getElementById("discount").innerText=discount;
updateCart();toast("Coupon Applied","success")
}

function checkout(){
if(cart.length===0)return toast("Cart Empty","error");
let total=cart.reduce((s,c)=>{
let m=menuData.find(x=>x.id===c.id);
return s+m.price*c.qty},0)-discount;
orders.push({id:"ORD"+Math.floor(Math.random()*9999),total,date:new Date().toLocaleString(),items:[...cart]});
cart=[];discount=0;save();updateCart();
confetti();
toast("Order Placed","success");
renderOrders();
}

function renderOrders(){
document.getElementById("orders").innerHTML=
orders.map(o=>`<div class="glass">
<b>${o.id}</b><br>₹${o.total}<br>${o.date}
</div>`).join("");
updateAdmin();
}

function openPage(id){
document.getElementById(id).classList.add("active");
if(id==="historyPage")renderOrders()
}
function closePage(){
document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"))
}

function toast(msg,type){
let t=document.getElementById("toast");
t.innerText=msg;
t.className="toast show "+type;
setTimeout(()=>t.className="toast",2000)
}

function confetti(){
for(let i=0;i<100;i++){
let d=document.createElement("div");
d.style.position="fixed";
d.style.width="6px";d.style.height="6px";
d.style.background="hsl("+Math.random()*360+",100%,50%)";
d.style.top="0";d.style.left=Math.random()*100+"%";
d.style.animation="fall 2s linear forwards";
document.body.appendChild(d);
setTimeout(()=>d.remove(),2000)
}
}
const style=document.createElement("style");
style.innerHTML="@keyframes fall{to{transform:translateY(100vh);opacity:0}}";
document.head.appendChild(style);

function updateAdmin(){
document.getElementById("aOrders").innerText=orders.length;
let rev=orders.reduce((s,o)=>s+o.total,0);
document.getElementById("aRevenue").innerText=rev;
let counts={};
orders.forEach(o=>o.items.forEach(i=>{
let m=menuData.find(x=>x.id===i.id);
counts[m.name]=(counts[m.name]||0)+i.qty
}));
let top=Object.keys(counts).sort((a,b)=>counts[b]-counts[a])[0]||"-";
document.getElementById("topItem").innerText=top;
let ctx=document.getElementById("chart").getContext("2d");
ctx.clearRect(0,0,300,200);
orders.forEach((o,i)=>{
ctx.fillStyle="#ffcc00";
ctx.fillRect(i*40,200-(o.total/5),30,o.total/5)
})
}

function resetAll(){
localStorage.clear();location.reload()
}

renderMenu();
updateCart();
renderOrders();

/* Secret Admin Access */
let clicks=0;
document.addEventListener("click",e=>{
if(e.clientX<50&&e.clientY<50){
clicks++;
if(clicks===3){openPage("adminPage");clicks=0}
setTimeout(()=>clicks=0,1000)
}
});
</script>

</body>
</html>
